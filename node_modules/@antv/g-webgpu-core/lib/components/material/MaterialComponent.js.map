{"version":3,"sources":["../../../src/components/material/MaterialComponent.ts"],"names":["MaterialComponent","data","vertexShaderGLSL","fragmentShaderGLSL","dirty","uniforms","cull","enable","face","gl","BACK","depth","blend","Object","assign","name","keys","forEach","key","setUniform","existedUniform","find","u","push","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;IAMaA,iB;;;;;AAoBX,6BAAYC,IAAZ,EAAqE;AAAA;;AAAA;AACnE,8BAAMA,IAAN;AADmE,UAnB9DC,gBAmB8D;AAAA,UAjB9DC,kBAiB8D;AAAA,UAf9DC,KAe8D,GAftD,IAesD;AAAA,UAb9DC,QAa8D,GAbhC,EAagC;AAAA,UAX9DC,IAW8D,GAXlB;AACjDC,MAAAA,MAAM,EAAE,IADyC;AAEjDC,MAAAA,IAAI,EAAEC,KAAGC;AAFwC,KAWkB;AAAA,UAN9DC,KAM8D,GANhB;AACnDJ,MAAAA,MAAM,EAAE;AAD2C,KAMgB;AAAA,UAF9DK,KAE8D;AAGnEC,IAAAA,MAAM,CAACC,MAAP,8CAAoBb,IAApB;AAHmE;AAIpE;;;;4BAEcK,I,EAA2C;AACxD,WAAKA,IAAL,GAAYA,IAAZ;AACA,aAAO,IAAP;AACD;;;6BAEeK,K,EAA6C;AAC3D,WAAKA,KAAL,GAAaA,KAAb;AACA,aAAO,IAAP;AACD;;;6BAEeC,K,EAA6C;AAC3D,WAAKA,KAAL,GAAaA,KAAb;AACA,aAAO,IAAP;AACD;;;+BAGCG,I,EACAd,I,EACA;AAAA;;AACA,UAAI,OAAOc,IAAP,KAAgB,QAApB,EAA8B;AAC5BF,QAAAA,MAAM,CAACG,IAAP,CAAYD,IAAZ,EAAkBE,OAAlB,CAA0B,UAACC,GAAD;AAAA,iBAAS,MAAI,CAACC,UAAL,CAAgBD,GAAhB,EAAqBH,IAAI,CAACG,GAAD,CAAzB,CAAT;AAAA,SAA1B;AACA,eAAO,IAAP;AACD;;AAED,UAAME,cAAc,GAAG,KAAKf,QAAL,CAAcgB,IAAd,CAAmB,UAACC,CAAD;AAAA,eAAOA,CAAC,CAACP,IAAF,KAAWA,IAAlB;AAAA,OAAnB,CAAvB;;AACA,UAAI,CAACK,cAAL,EAAqB;AACnB,aAAKf,QAAL,CAAckB,IAAd,CAAmB;AACjBR,UAAAA,IAAI,EAAJA,IADiB;AAEjBX,UAAAA,KAAK,EAAE,IAFU;AAGjBH,UAAAA,IAAI,EAAEA;AAHW,SAAnB;AAKD,OAND,MAMO;AACLmB,QAAAA,cAAc,CAAChB,KAAf,GAAuB,IAAvB;AACAgB,QAAAA,cAAc,CAACnB,IAAf,GAAsBA,IAAtB;AACD;;AAED,WAAKG,KAAL,GAAa,IAAb;AACA,aAAO,IAAP;AACD;;;EAhEoCoB,W","sourcesContent":["import { Component, gl } from '../..';\nimport { NonFunctionProperties } from '../../ComponentManager';\nimport { IModelInitializationOptions } from '../renderer/IModel';\nimport { BufferData } from '../renderer/IRendererService';\nimport { IUniformBinding } from './interface';\n\nexport class MaterialComponent extends Component<MaterialComponent> {\n  public vertexShaderGLSL: string;\n\n  public fragmentShaderGLSL: string;\n\n  public dirty = true;\n\n  public uniforms: IUniformBinding[] = [];\n\n  public cull: IModelInitializationOptions['cull'] = {\n    enable: true,\n    face: gl.BACK,\n  };\n\n  public depth: IModelInitializationOptions['depth'] = {\n    enable: true,\n  };\n\n  public blend: IModelInitializationOptions['blend'];\n\n  constructor(data: Partial<NonFunctionProperties<MaterialComponent>>) {\n    super(data);\n\n    Object.assign(this, data);\n  }\n\n  public setCull(cull: IModelInitializationOptions['cull']) {\n    this.cull = cull;\n    return this;\n  }\n\n  public setDepth(depth: IModelInitializationOptions['depth']) {\n    this.depth = depth;\n    return this;\n  }\n\n  public setBlend(blend: IModelInitializationOptions['blend']) {\n    this.blend = blend;\n    return this;\n  }\n\n  public setUniform(\n    name: string | Record<string, BufferData>,\n    data?: BufferData,\n  ) {\n    if (typeof name !== 'string') {\n      Object.keys(name).forEach((key) => this.setUniform(key, name[key]));\n      return this;\n    }\n\n    const existedUniform = this.uniforms.find((u) => u.name === name);\n    if (!existedUniform) {\n      this.uniforms.push({\n        name,\n        dirty: true,\n        data: data!,\n      });\n    } else {\n      existedUniform.dirty = true;\n      existedUniform.data = data!;\n    }\n\n    this.dirty = true;\n    return this;\n  }\n}\n"],"file":"MaterialComponent.js"}