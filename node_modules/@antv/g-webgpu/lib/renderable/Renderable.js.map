{"version":3,"sources":["../../src/renderable/Renderable.ts"],"names":["Renderable","IDENTIFIER","MeshComponentManager","CullableComponentManager","TransformComponentManager","Systems","SceneGraphSystem","config","meshComponent","transformComponent","entity","cullable","create","mesh","transform","afterEntityCreated","material","geometry","visible","parentRenderable","sceneGraphSystem","attach","detach","detachChildren","POINT","LINE"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;AAaA;;;;IAUaA,U,WADZ,4B,UAOE,uBAAOC,wBAAWC,oBAAlB,C,UAGA,uBAAOD,wBAAWE,wBAAlB,C,UAGA,uBAAOF,wBAAWG,yBAAlB,C,UAGA,uBAAOH,wBAAWI,OAAlB,C,UACA,sBAAMJ,wBAAWK,gBAAjB,C;;;SAZSC,M;;;;;SAeFC,a;SACAC,kB;SAEAC,M;;;;;gCAEW;AACjB,aAAO,KAAKA,MAAZ;AACD;;;4CAE8B;AAC7B,aAAO,KAAKD,kBAAZ;AACD;;;uCAEyB;AACxB,aAAO,KAAKD,aAAZ;AACD;;;8BAEgBD,M,EAAW;AAC1B,WAAKA,MAAL,GAAcA,MAAd;AACD;;;8BAEgBG,M,EAAgB;AAC/B,WAAKA,MAAL,GAAcA,MAAd;AACA,WAAKC,QAAL,CAAcC,MAAd,CAAqBF,MAArB;AACA,WAAKF,aAAL,GAAqB,KAAKK,IAAL,CAAUD,MAAV,CAAiBF,MAAjB,CAArB;AACA,WAAKD,kBAAL,GAA0B,KAAKK,SAAL,CAAeF,MAAf,CAAsBF,MAAtB,CAA1B;AACA,WAAKK,kBAAL;AACD;;;gCAEkBC,Q,EAA6B;AAC9C,WAAKR,aAAL,CAAmBQ,QAAnB,GAA8BA,QAA9B;AACA,aAAO,IAAP;AACD;;;gCAEkBC,Q,EAA6B;AAC9C,WAAKT,aAAL,CAAmBS,QAAnB,GAA8BA,QAA9B;AACA,aAAO,IAAP;AACD;;;+BAEiBC,O,EAAkB;AAClC,WAAKV,aAAL,CAAmBU,OAAnB,GAA6BA,OAA7B;AACA,aAAO,IAAP;AACD;;;gCAEkB;AACjB,aAAO,KAAKV,aAAL,CAAmBU,OAA1B;AACD;;;2BAEaC,gB,EAAiC;AAC7C,WAAKC,gBAAL,CAAsBC,MAAtB,CAA6B,KAAKX,MAAlC,EAA0CS,gBAAgB,CAACT,MAA3D;AACA,aAAO,IAAP;AACD;;;6BAEe;AACd,WAAKU,gBAAL,CAAsBE,MAAtB,CAA6B,KAAKZ,MAAlC;AACA,aAAO,IAAP;AACD;;;qCAEuB;AACtB,WAAKU,gBAAL,CAAsBG,cAAtB,CAAqC,KAAKb,MAA1C;AACA,aAAO,IAAP;AACD;AAED;AACF;AACA;;;;yCACiC,CAC7B;AACD;;;aAtFac,K,GAAQ,O,UACRC,I,GAAO,M","sourcesContent":["import {\n  ComponentManager,\n  CullableComponent,\n  Entity,\n  GeometryComponent,\n  HierarchyComponent,\n  IDENTIFIER,\n  MaterialComponent,\n  MeshComponent,\n  SceneGraphSystem,\n  TransformComponent,\n} from '@antv/g-webgpu-core';\nimport { mat4 } from 'gl-matrix';\nimport { inject, injectable, named } from 'inversify';\n\nexport interface IRenderable<T> {\n  setConfig(config: T): void;\n  setEntity(entity: Entity): void;\n  setMaterial(material: MaterialComponent): void;\n  setGeometry(geometry: GeometryComponent): void;\n}\n\n@injectable()\nexport class Renderable<T = unknown> implements IRenderable<T> {\n  public static POINT = 'point';\n  public static LINE = 'line';\n\n  protected config: T;\n\n  @inject(IDENTIFIER.MeshComponentManager)\n  private readonly mesh: ComponentManager<MeshComponent>;\n\n  @inject(IDENTIFIER.CullableComponentManager)\n  private readonly cullable: ComponentManager<CullableComponent>;\n\n  @inject(IDENTIFIER.TransformComponentManager)\n  private readonly transform: ComponentManager<TransformComponent>;\n\n  @inject(IDENTIFIER.Systems)\n  @named(IDENTIFIER.SceneGraphSystem)\n  private readonly sceneGraphSystem: SceneGraphSystem;\n\n  private meshComponent: MeshComponent;\n  private transformComponent: TransformComponent;\n\n  private entity: Entity;\n\n  public getEntity() {\n    return this.entity;\n  }\n\n  public getTransformComponent() {\n    return this.transformComponent;\n  }\n\n  public getMeshComponent() {\n    return this.meshComponent;\n  }\n\n  public setConfig(config: T) {\n    this.config = config;\n  }\n\n  public setEntity(entity: Entity) {\n    this.entity = entity;\n    this.cullable.create(entity);\n    this.meshComponent = this.mesh.create(entity);\n    this.transformComponent = this.transform.create(entity);\n    this.afterEntityCreated();\n  }\n\n  public setMaterial(material: MaterialComponent) {\n    this.meshComponent.material = material;\n    return this;\n  }\n\n  public setGeometry(geometry: GeometryComponent) {\n    this.meshComponent.geometry = geometry;\n    return this;\n  }\n\n  public setVisible(visible: boolean) {\n    this.meshComponent.visible = visible;\n    return this;\n  }\n\n  public isVisible() {\n    return this.meshComponent.visible;\n  }\n\n  public attach(parentRenderable: Renderable<T>) {\n    this.sceneGraphSystem.attach(this.entity, parentRenderable.entity);\n    return this;\n  }\n\n  public detach() {\n    this.sceneGraphSystem.detach(this.entity);\n    return this;\n  }\n\n  public detachChildren() {\n    this.sceneGraphSystem.detachChildren(this.entity);\n    return this;\n  }\n\n  /**\n   * @override\n   */\n  protected afterEntityCreated() {\n    //\n  }\n}\n"],"file":"Renderable.js"}