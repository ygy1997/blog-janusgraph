{"version":3,"sources":["../../src/renderable/Renderable.ts"],"names":["IDENTIFIER","inject","injectable","named","Renderable","MeshComponentManager","CullableComponentManager","TransformComponentManager","Systems","SceneGraphSystem","config","meshComponent","transformComponent","entity","cullable","create","mesh","transform","afterEntityCreated","material","geometry","visible","parentRenderable","sceneGraphSystem","attach","detach","detachChildren","POINT","LINE"],"mappings":";;;;;;;;AAAA,SAMEA,UANF,QAWO,qBAXP;AAaA,SAASC,MAAT,EAAiBC,UAAjB,EAA6BC,KAA7B,QAA0C,WAA1C;AAUA,WAAaC,UAAb,WADCF,UAAU,EACX,UAMGD,MAAM,CAACD,UAAU,CAACK,oBAAZ,CANT,UASGJ,MAAM,CAACD,UAAU,CAACM,wBAAZ,CATT,UAYGL,MAAM,CAACD,UAAU,CAACO,yBAAZ,CAZT,UAeGN,MAAM,CAACD,UAAU,CAACQ,OAAZ,CAfT,UAgBGL,KAAK,CAACH,UAAU,CAACS,gBAAZ,CAhBR;AAAA;AAAA;;AAAA,SAIYC,MAJZ;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,SAmBUC,aAnBV;AAAA,SAoBUC,kBApBV;AAAA,SAsBUC,MAtBV;AAAA;;AAAA;AAAA;AAAA,gCAwBqB;AACjB,aAAO,KAAKA,MAAZ;AACD;AA1BH;AAAA;AAAA,4CA4BiC;AAC7B,aAAO,KAAKD,kBAAZ;AACD;AA9BH;AAAA;AAAA,uCAgC4B;AACxB,aAAO,KAAKD,aAAZ;AACD;AAlCH;AAAA;AAAA,8BAoCmBD,MApCnB,EAoC8B;AAC1B,WAAKA,MAAL,GAAcA,MAAd;AACD;AAtCH;AAAA;AAAA,8BAwCmBG,MAxCnB,EAwCmC;AAC/B,WAAKA,MAAL,GAAcA,MAAd;AACA,WAAKC,QAAL,CAAcC,MAAd,CAAqBF,MAArB;AACA,WAAKF,aAAL,GAAqB,KAAKK,IAAL,CAAUD,MAAV,CAAiBF,MAAjB,CAArB;AACA,WAAKD,kBAAL,GAA0B,KAAKK,SAAL,CAAeF,MAAf,CAAsBF,MAAtB,CAA1B;AACA,WAAKK,kBAAL;AACD;AA9CH;AAAA;AAAA,gCAgDqBC,QAhDrB,EAgDkD;AAC9C,WAAKR,aAAL,CAAmBQ,QAAnB,GAA8BA,QAA9B;AACA,aAAO,IAAP;AACD;AAnDH;AAAA;AAAA,gCAqDqBC,QArDrB,EAqDkD;AAC9C,WAAKT,aAAL,CAAmBS,QAAnB,GAA8BA,QAA9B;AACA,aAAO,IAAP;AACD;AAxDH;AAAA;AAAA,+BA0DoBC,OA1DpB,EA0DsC;AAClC,WAAKV,aAAL,CAAmBU,OAAnB,GAA6BA,OAA7B;AACA,aAAO,IAAP;AACD;AA7DH;AAAA;AAAA,gCA+DqB;AACjB,aAAO,KAAKV,aAAL,CAAmBU,OAA1B;AACD;AAjEH;AAAA;AAAA,2BAmEgBC,gBAnEhB,EAmEiD;AAC7C,WAAKC,gBAAL,CAAsBC,MAAtB,CAA6B,KAAKX,MAAlC,EAA0CS,gBAAgB,CAACT,MAA3D;AACA,aAAO,IAAP;AACD;AAtEH;AAAA;AAAA,6BAwEkB;AACd,WAAKU,gBAAL,CAAsBE,MAAtB,CAA6B,KAAKZ,MAAlC;AACA,aAAO,IAAP;AACD;AA3EH;AAAA;AAAA,qCA6E0B;AACtB,WAAKU,gBAAL,CAAsBG,cAAtB,CAAqC,KAAKb,MAA1C;AACA,aAAO,IAAP;AACD;AAED;AACF;AACA;;AApFA;AAAA;AAAA,yCAqFiC,CAC7B;AACD;AAvFH;;AAAA;AAAA,aACgBc,KADhB,GACwB,OADxB,UAEgBC,IAFhB,GAEuB,MAFvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import {\n  ComponentManager,\n  CullableComponent,\n  Entity,\n  GeometryComponent,\n  HierarchyComponent,\n  IDENTIFIER,\n  MaterialComponent,\n  MeshComponent,\n  SceneGraphSystem,\n  TransformComponent,\n} from '@antv/g-webgpu-core';\nimport { mat4 } from 'gl-matrix';\nimport { inject, injectable, named } from 'inversify';\n\nexport interface IRenderable<T> {\n  setConfig(config: T): void;\n  setEntity(entity: Entity): void;\n  setMaterial(material: MaterialComponent): void;\n  setGeometry(geometry: GeometryComponent): void;\n}\n\n@injectable()\nexport class Renderable<T = unknown> implements IRenderable<T> {\n  public static POINT = 'point';\n  public static LINE = 'line';\n\n  protected config: T;\n\n  @inject(IDENTIFIER.MeshComponentManager)\n  private readonly mesh: ComponentManager<MeshComponent>;\n\n  @inject(IDENTIFIER.CullableComponentManager)\n  private readonly cullable: ComponentManager<CullableComponent>;\n\n  @inject(IDENTIFIER.TransformComponentManager)\n  private readonly transform: ComponentManager<TransformComponent>;\n\n  @inject(IDENTIFIER.Systems)\n  @named(IDENTIFIER.SceneGraphSystem)\n  private readonly sceneGraphSystem: SceneGraphSystem;\n\n  private meshComponent: MeshComponent;\n  private transformComponent: TransformComponent;\n\n  private entity: Entity;\n\n  public getEntity() {\n    return this.entity;\n  }\n\n  public getTransformComponent() {\n    return this.transformComponent;\n  }\n\n  public getMeshComponent() {\n    return this.meshComponent;\n  }\n\n  public setConfig(config: T) {\n    this.config = config;\n  }\n\n  public setEntity(entity: Entity) {\n    this.entity = entity;\n    this.cullable.create(entity);\n    this.meshComponent = this.mesh.create(entity);\n    this.transformComponent = this.transform.create(entity);\n    this.afterEntityCreated();\n  }\n\n  public setMaterial(material: MaterialComponent) {\n    this.meshComponent.material = material;\n    return this;\n  }\n\n  public setGeometry(geometry: GeometryComponent) {\n    this.meshComponent.geometry = geometry;\n    return this;\n  }\n\n  public setVisible(visible: boolean) {\n    this.meshComponent.visible = visible;\n    return this;\n  }\n\n  public isVisible() {\n    return this.meshComponent.visible;\n  }\n\n  public attach(parentRenderable: Renderable<T>) {\n    this.sceneGraphSystem.attach(this.entity, parentRenderable.entity);\n    return this;\n  }\n\n  public detach() {\n    this.sceneGraphSystem.detach(this.entity);\n    return this;\n  }\n\n  public detachChildren() {\n    this.sceneGraphSystem.detachChildren(this.entity);\n    return this;\n  }\n\n  /**\n   * @override\n   */\n  protected afterEntityCreated() {\n    //\n  }\n}\n"],"file":"Renderable.js"}